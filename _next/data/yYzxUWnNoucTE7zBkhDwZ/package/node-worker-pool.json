{"pageProps":{"postData":{"_id":"5fb66b2b9f9e7f16fd324c1d","id":"node-worker-pool","crawlTimestamp":"19/11/2020 12:55:06","packageName":"node-worker-pool","description":"node-worker-pool is a library for managing a pool of child workers in node.","repository":{"type":"git","url":"git+https://github.com/jeffmo/node-worker-pool.git"},"readme":"# node-worker-pool [![Build Status](https://travis-ci.org/jeffmo/node-worker-pool.svg?branch=master)](https://travis-ci.org/jeffmo/node-worker-pool)\n\nnode-worker-pool is a library for managing a pool of child workers in node.\n\nIt's primarily useful for scenarios where you have lots of highly parallelizable\ntasks you want to perform. It works exclusively via message-passing, so there is\nno need to share memory.\n\nSpecifically, node-worker-pool allows you to define your own worker executable\nthat is capable of communicating over stdin/stdout (via a fairly simple protocol\nfor which I have yet to propertly document :p).\n\n## Getting started\n\n* Write a worker executable file\n* Construct a WorkerPool object that points at the aforementioend worker\n  executable\n* Send messages to the WorkerPool object and wait for responses\n\n#### Writing a worker executable file\n\nYou technically don't have to write this file in node, but for the time being\nthere are only node helper libraries for abstracting away the communciation\nprotocols. Here is an example worker:\n\n__worker.js__\n```js\nvar workerUtils = require('node-worker-pool/nodeWorkerUtils');\n\n/**\n * Executed once when the worker pool first starts\n * (before any messages are received)\n */\nvar initData;\nfunction onInitialize(data) {\n  initData = data;\n}\n\n/**\n * Executed each time a message is received from the worker pool.\n * Returns the response to the message (response must always be an object)\n */\nfunction onMessage(data) {\n  return {\n    initData: initData,\n    receivedData: data\n  };\n}\n\nif (require.main === module) {\n  try {\n    workerUtils.startWorker(onInitialize, onMessage);\n  } catch (e) {\n    workerUtils.respondWithError(e);\n  }\n}\n```\n\n__workerPool.js__\n```js\nif (require.main === module) {\n  var workerPool = new WorkerPool(\n    8,                // number of workers\n    process.execPath, // path to the node binary\n    './worker.js',    // path to the worker script\n    {\n      // The initData object that is passed to each worker exactly once before\n      // any messages get sent. Workers receive this object via their\n      // onInitialize callback.\n      initData: {someUsefulConstant: 42}\n    }\n  );\n\n  workerPool.sendMessage({message: 'hai!'}).then(function(response) {\n    console.log(response); // Prints the response object from the worker\n  });\n\n  workerPool.shutDown().then(function() {\n    console.log('All worker processes have now been killed');\n  });\n}\n```\n","homepage":"https://github.com/jeffmo/node-worker-pool#readme","trustScore":11,"sourceRank":{"basic_info_present":1,"repository_present":1,"readme_present":1,"license_present":1,"versions_present":1,"follows_semver":1,"recent_release":0,"not_brand_new":1,"one_point_oh":1,"dependent_projects":0,"dependent_repositories":2,"stars":1,"contributors":0,"subscribers":0,"all_prereleases":0,"any_outdated_dependencies":0,"is_deprecated":0,"is_unmaintained":0,"is_removed":0,"trustScore":11},"versions":[{"versionNumber":"0.1.0","timestamp":"2013-11-25T18:22:19.245Z","trustScore":5,"dependencies":[{"packageName":"q","version":"~0.9.7"}]},{"versionNumber":"0.1.1","timestamp":"2013-12-10T00:50:21.471Z","trustScore":5,"dependencies":[{"packageName":"q","version":"~0.9.7"}]},{"versionNumber":"0.1.2","timestamp":"2014-02-27T21:27:51.726Z","trustScore":5,"dependencies":[{"packageName":"q","version":"~0.9.7"}]},{"versionNumber":"0.1.3","timestamp":"2014-03-27T21:12:56.424Z","trustScore":5,"dependencies":[{"packageName":"q","version":"~0.9.7"}]},{"versionNumber":"1.0.1","timestamp":"2014-04-02T21:21:28.717Z","trustScore":6,"dependencies":[{"packageName":"q","version":"~0.9.7"}]},{"versionNumber":"2.0.0","timestamp":"2014-04-03T02:22:54.975Z","trustScore":5,"dependencies":[{"packageName":"q","version":"~0.9.7"}]},{"versionNumber":"2.1.0","timestamp":"2014-04-04T07:10:22.053Z","trustScore":5,"dependencies":[{"packageName":"q","version":"~0.9.7"}]},{"versionNumber":"2.1.1","timestamp":"2014-04-04T07:15:05.870Z","trustScore":4,"dependencies":[{"packageName":"q","version":"~0.9.7"}]},{"versionNumber":"2.1.2","timestamp":"2014-04-07T23:57:44.685Z","trustScore":5,"dependencies":[{"packageName":"q","version":"~0.9.7"}]},{"versionNumber":"2.1.3","timestamp":"2014-04-25T06:18:39.641Z","trustScore":4,"dependencies":[{"packageName":"q","version":"~0.9.7"}]},{"versionNumber":"2.1.4","timestamp":"2014-04-25T06:40:26.402Z","trustScore":5,"dependencies":[{"packageName":"q","version":"~0.9.7"}]},{"versionNumber":"2.1.5","timestamp":"2014-05-06T01:23:29.728Z","trustScore":5,"dependencies":[{"packageName":"q","version":"~0.9.7"}]},{"versionNumber":"2.2.0","timestamp":"2014-05-06T19:20:39.797Z","trustScore":5,"dependencies":[{"packageName":"q","version":"~0.9.7"}]},{"versionNumber":"2.3.0","timestamp":"2014-05-06T19:41:55.873Z","trustScore":5,"dependencies":[{"packageName":"q","version":"~0.9.7"}]},{"versionNumber":"2.4.0","timestamp":"2014-05-06T20:44:57.287Z","trustScore":5,"dependencies":[{"packageName":"q","version":"~0.9.7"}]},{"versionNumber":"2.4.1","timestamp":"2014-06-24T20:25:25.266Z","trustScore":5,"dependencies":[{"packageName":"q","version":"~0.9.7"}]},{"versionNumber":"2.4.2","timestamp":"2014-10-10T18:19:19.404Z","trustScore":5,"dependencies":[{"packageName":"q","version":"~0.9.7"}]},{"versionNumber":"2.4.3","timestamp":"2014-12-09T21:50:23.006Z","trustScore":6,"dependencies":[{"packageName":"q","version":"~0.9.7"}]},{"versionNumber":"2.4.4","timestamp":"2015-02-28T19:45:36.585Z","trustScore":4,"dependencies":[{"packageName":"q","version":"~0.9.7"}]},{"versionNumber":"2.4.5","timestamp":"2015-09-01T04:14:27.603Z","trustScore":5,"dependencies":[{"packageName":"q","version":"~0.9.7"}]},{"versionNumber":"3.0.0","timestamp":"2015-09-03T00:58:56.482Z","trustScore":5,"dependencies":[]},{"versionNumber":"3.0.2","timestamp":"2015-09-10T19:22:51.378Z","trustScore":11,"dependencies":[]}]}},"__N_SSG":true}