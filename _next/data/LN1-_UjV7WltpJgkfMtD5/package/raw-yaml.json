{"pageProps":{"postData":{"_id":"5fb06816a28b82fef5a67ab2","id":"raw-yaml","crawlTimestamp":"14/11/2020 23:28:20","packageName":"raw-yaml","description":"Read anything as YAML (including #comments)","repository":{"type":"git","url":"git+https://github.com/eemeli/raw-yaml.git"},"readme":"# raw-yaml\n### Read anything as YAML\n\nA maximally liberal [YAML 1.2] parser:\n- Will do its best to turn any string input into a YAML-ish AST representation\n- Fully supports programmatic handling of YAML comments and multi-document streams\n- Does practically no error checking, and should never throw -- but if you feed it garbage, you'll likely get a garbage AST as well\n- Has no runtime dependencies and compresses to 11kB\n- Minimises memory consumption by being really lazy; doesn't calculate node string values until you specifically ask for them\n- Output object overrides `toString` at all levels to provide an idempotent YAML string representation\n- Allows (slightly clumsy) editing with a settable `Node#value`\n- Tested against all examples included in the YAML 1.2 spec\n\n[YAML 1.2]: http://www.yaml.org/spec/1.2/spec.html\n\n\n## Usage & API\n\nTo install:\n```\nnpm install raw-yaml\n```\n\nTo use:\n```js\nimport parse from 'raw-yaml'\n\nconst str = `\nsequence: [ one, two, ]\nmapping: { sky: blue, sea: green }\n---\n-\n  \"flow in block\"\n- >\n Block scalar\n- !!map # Block collection\n  foo : bar`\n\nconst ast = parse(str)\n\nast[0]            // first document, containing a map with two keys\n  .contents[0]    // document contents (as opposed to directives)\n  .items[3].node  // the last item, a flow map\n  .items[3]       // the fourth token, parsed as a plain value\n  .strValue       // 'blue'\n\nast[1]            // second document, containing a sequence\n  .contents[0]    // document contents (as opposed to directives)\n  .items[1].node  // the second item, a block value\n  .strValue       // 'Block scalar\\n'\n```\n\n### `parse(string): Array<Document>`\n\nThe public API of the library is a single function which returns an array of parsed YAML documents (see below for details). The array and its contained nodes override the default `toString` method, each returning a YAML representation of its contents.\n\nIf a node has its `value` set, that will be used when re-stringifying. Care should be taken when modifying the AST, as no error checks are included to verify that the resulting YAML is valid, or that e.g. indentation levels aren't broken. In other words, this is an engineering tool and you may hurt yourself. If you're looking to generate a brand new YAML document, you should probably not be using this library directly.\n\nIf using the module in a CommonJS environment, the default-exported function is available at `require('raw-yaml').default`.\n\nFor more usage examples and AST trees, take a look through the [`__tests__`](https://github.com/eemeli/raw-yaml/tree/master/__tests__) directory.\n\n\n## AST Structure\n\nFor an example, here's what the first few lines of this file look like when parsed by raw-yaml (simplified for clarity):\n\n```js\n[ {\n  directives: [\n    { type: 'COMMENT', comment: ' raw-yaml' },\n    { type: 'COMMENT', comment: '## Read anything as YAML' }\n  ],\n  contents: [\n    { type: 'MAP', items: [\n      { type: 'PLAIN', strValue: 'A maximally liberal YAML 1.2...' },\n      { type: 'MAP_VALUE', node: { type: 'SEQ', items: [\n        { type: 'SEQ_ITEM', node: { strValue: 'Will do its...' } },\n        { type: 'SEQ_ITEM', node: { strValue: 'Fully supports...' } }\n      ] } }\n    ] }\n  ]\n} ]\n```\n\nEach node in the AST extends a common ancestor `Node` (using flow-ish notation, so `+` as a prefix indicates a read-only property:\n\n```js\nclass Range {\n  start: number,        // offset of first character\n  end: number,          // offset after last character\n  +isEmpty: boolean     // true if end is not greater than start\n}\n\nclass Node {\n  context: {\n    atLineStart: boolean, // is this node the first one on this line\n    indent: number,     // current level of indentation (may be -1)\n    src: string         // the full original source\n  },\n  error: ?Error,        // if not null, indicates a parser failure\n  props: Array<Range>,  // anchors, tags and comments\n  range: Range,         // span of context.src parsed into this node\n  type:                 // specific node type\n    'ALIAS' | 'BLOCK_FOLDED' | 'BLOCK_LITERAL' | 'COMMENT' |\n    'DIRECTIVE' | 'DOCUMENT' | 'FLOW_MAP' | 'FLOW_SEQ' |\n    'MAP' | 'MAP_KEY' | 'MAP_VALUE' | 'PLAIN' |\n    'QUOTE_DOUBLE' | 'QUOTE_SINGLE' | 'SEQ' | 'SEQ_ITEM',\n  value: ?string        // if non-null, overrides source value\n  +anchor: ?string,     // anchor, if set\n  +comment: ?string,    // newline-delimited comment(s), if any\n  +rawValue: ?string,   // an unprocessed slice of context.src\n                        //   determining this node's value\n  +tag: null |          // this node's tag, if set\n    { verbatim: string } | { handle: string, suffix: string },\n  toString(): string    // a YAML string representation of this node\n}\n\nclass Alias extends Node {\n  // rawValue will contain the anchor without the * prefix\n  type: 'ALIAS'\n}\n\nclass Scalar extends Node {\n  type: 'PLAIN' | 'QUOTE_DOUBLE' | 'QUOTE_SINGLE' |\n    'BLOCK_FOLDED' | 'BLOCK_LITERAL'\n  +strValue: ?string    // unescaped string value; may throw for\n                        //   QUOTE_DOUBLE on bad escape sequences\n}\n\nclass Comment extends Node {\n  type: 'COMMENT',      // PLAIN nodes may also be comment-only\n  +anchor: null,\n  +comment: string,\n  +rawValue: null,\n  +tag: null\n}\n\nclass MapItem extends Node {\n  node: ContentNode | null,\n  type: 'MAP_KEY' | 'MAP_VALUE'\n}\n\nclass Map extends Node {\n  // implicit keys are not wrapped\n  items: Array<Comment | Alias | Scalar | MapItem>,\n  type: 'MAP'\n}\n\nclass SeqItem extends Node {\n  node: ContentNode | null,\n  type: 'SEQ_ITEM'\n}\n\nclass Seq extends Node {\n  items: Array<Comment | SeqItem>,\n  type: 'SEQ'\n}\n\ntype FlowChar = '{' | '}' | '[' | ']' | ',' | '?' | ':'\n\nclass FlowCollection extends Node {\n  items: Array<FlowChar | Comment | Alias | Scalar | FlowCollection>,\n  type: 'FLOW_MAP' | 'FLOW_SEQ'\n}\n\ntype ContentNode =\n  Comment | Alias | Scalar | Map | Seq | FlowCollection\n\nclass Directive extends Node {\n  name: string,  // for YAML 1.2 should be 'TAG' or 'YAML'\n  type: 'DIRECTIVE',\n  +anchor: null,\n  +parameters: Array<string>,\n  +tag: null\n}\n\nclass Document extends Node {\n  directives: Array<Comment | Directive>,\n  contents: Array<ContentNode>,\n  type: 'DOCUMENT',\n  +anchor: null,\n  +comment: null,\n  +tag: null\n}\n```\n\nIn actual code, `MapItem` and `SeqItem` are implemented as `CollectionItem`, and correspondingly `Map` and `Seq` as `Collection`. Due to parsing differences, each scalar type is implemented using its own class. Additional undocumented properties are available for `Node`, but are likely only useful during parsing.\n","homepage":"https://github.com/eemeli/raw-yaml#readme","trustScore":7,"sourceRank":{"basic_info_present":1,"repository_present":1,"readme_present":1,"license_present":1,"versions_present":1,"follows_semver":1,"recent_release":0,"not_brand_new":1,"one_point_oh":0,"dependent_projects":0,"dependent_repositories":0,"stars":0,"contributors":0,"subscribers":0,"all_prereleases":0,"any_outdated_dependencies":0,"is_deprecated":0,"is_unmaintained":0,"is_removed":0,"trustScore":7},"versions":[{"versionNumber":"0.1.0","timestamp":"2018-01-24T20:04:06.846Z","trustScore":8,"dependencies":[]},{"versionNumber":"0.1.1","timestamp":"2018-01-25T14:48:00.237Z","trustScore":7,"dependencies":[]},{"versionNumber":"0.2.0","timestamp":"2018-01-27T21:26:32.160Z","trustScore":7,"dependencies":[]},{"versionNumber":"0.2.1","timestamp":"2018-01-27T22:47:33.125Z","trustScore":7,"dependencies":[]},{"versionNumber":"0.2.2","timestamp":"2018-01-29T00:11:42.381Z","trustScore":6,"dependencies":[]},{"versionNumber":"0.2.3","timestamp":"2018-02-03T15:11:11.422Z","trustScore":7,"dependencies":[]},{"versionNumber":"0.2.4","timestamp":"2018-02-19T06:29:28.970Z","trustScore":7,"dependencies":[]},{"versionNumber":"0.2.5","timestamp":"2018-02-19T08:40:42.310Z","trustScore":8,"dependencies":[]}]}},"__N_SSG":true}