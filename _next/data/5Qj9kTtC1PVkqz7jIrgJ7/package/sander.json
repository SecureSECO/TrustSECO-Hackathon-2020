{"pageProps":{"postData":{"_id":"5fb6694a9f9e7f16fd324a9c","id":"sander","crawlTimestamp":"19/11/2020 12:47:05","packageName":"sander","description":"Promise-based power tool for common filesystem tasks","repository":{"type":"git","url":"git+https://github.com/rich-harris/sander.git"},"readme":"# sander\n\nA Promise-based power tool for common filesystem tasks in node.js.\n\n## Installation\n\n```bash\nnpm install sander\n```\n\n## Another wrapper around `fs`? Really?\n\nYup. Working with the low-level `fs` API is the fastest road to callback hell, and while a lot of the existing `fs` wrappers add a whole load of missing features, they don't really mitigate the fundamental suckiness of working with the filesystem in a painful, imperative way, which forces you to handle errors at every step of the journey towards the centre of the node.js [pyramid of doom](http://stackoverflow.com/search?q=pyramid+of+doom).\n\n**Enough! Manual filing is tedious - you need a power tool.** Instead of writing this...\n\n```js\nvar path = require( 'path' ),\n    fs = require( 'fs' ),\n    mkdirp = require( 'mkdirp' );\n\nvar dest = path.resolve( basedir, filename );\n\nmkdirp( path.dirname( dest ), function ( err ) {\n  if ( err ) throw err;\n\n  fs.writeFile( dest, data, function ( err ) {\n    if ( err ) throw err;\n    doTheNextThing();\n  });\n});\n```\n\n...write this:\n\n```js\nvar sander = require( 'sander' );\nsander.writeFile( basedir, filename, data ).then( doTheNextThing );\n```\n\nIt uses [graceful-fs](https://github.com/isaacs/node-graceful-fs) rather than the built-in `fs` module, to eliminate [EMFILE](http://blog.izs.me/post/56827866110/wtf-is-emfile-and-why-does-it-happen-to-me) from the list of things you have to worry about.\n\n\n## Conventions\n\n### Promises\n\nAll async methods (those whose `fs` equivalents would take a callback, e.g. `sander.readFile`) return a Promise. If you're not familiar with Promises, [read up on them on MDN](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise) - they're coming in ES6 and are already supported in many browsers, and I guarantee they'll make your life easier.\n\n(Node doesn't natively support promises yet - we're using [es6-promise](https://github.com/jakearchibald/es6-promise) for maximum compatibility. For convenience, the `Promise` constructor is exposed as `sander.Promise`.)\n\n### Intermediate folder creation\n\nWhen writing files and folders, intermediate folders are automatically created as necessary. (I've never encountered a situation where I wanted an `ENOENT` error instead of having this be done for me.)\n\n### Automatic path resolution\n\nWherever appropriate, method arguments are joined together with `path.resolve()` - so the following are equivalent:\n\n```js\nsander.readFile( 'foo', 'bar', 'baz' );\nsander.readFile( path.resolve( 'foo', 'bar', 'baz' ) );\nsander.readFile( 'foo/bar/baz' ); // or 'foo\\bar\\baz' on Windows\n```\n\n### Methods that involve two paths\n\nSome operations, such as renaming files, require two paths to be specified. The convention for handling this in sander is as follows:\n\n```js\nsander.rename( basedir, oldname ).to( basedir, newname );\n```\n\n\n\n## Methods\n\n### `fs` methods\n\nIn addition to the extra methods (listed below), all `fs` methods have `sander` equivalents. The synchronous methods (those ending `Sync`) are the same as the `fs` originals except that path resolution and intermediate folder creation are automatically handled (see [conventions](#conventions), above). All async methods return a promise.\n\nFor more information about what these methods do, consult the [node documentation](http://nodejs.org/api/fs.html).\n\nIn the list below, `...paths` indicates you can use one or more strings in sequence, as per the [automatic path resolution](#automatic-path-resolution) convention. An `fd` argument refers to a file descriptor, which you'd generate with `sander.open()` or `sander.openSync()`. Arguments wrapped in `[]` characters are optional.\n\n```js\nsander.appendFile(...paths, data, [options])\nsander.appendFileSync(...paths, data, [options])\nsander.chmod(...paths, {mode: mode})\nsander.chmodSync(...paths, {mode: mode})\nsander.chown(...paths, uid, gid)\nsander.chownSync(...paths, uid, gid)\nsander.close(fd)\nsander.closeSync(fd)\nsander.createReadStream(...paths, [options])\nsander.createWriteStream(...paths, [options])\nsander.exists(...paths)\nsander.existsSync(...paths)\nsander.fchmod(fd, {mode: mode})\nsander.fchmodSync(fd, {mode: mode})\nsander.fchown(fd, uid, gid)\nsander.fchownSync(fd, uid, gid)\nsander.fstat(fd)\nsander.fstatSync(fd)\nsander.fsync(fd)\nsander.fsyncSync(fd)\nsander.ftruncate(fd, len)\nsander.ftruncateSync(fd, len)\nsander.futimes(fd, atime, mtime)\nsander.futimesSync(fd, atime, mtime)\nsander.lchmod(...paths, {mode: mode})\nsander.lchmodSync(...paths, {mode: mode})\nsander.lchown(...paths, uid, gid)\nsander.lchownSync(...paths, uid, gid)\nsander.link(...paths).to(...paths)\nsander.linkSync(...paths).to(...paths)\nsander.lstat(...paths)\nsander.lstatSync(...paths)\nsander.mkdir(...paths, [{mode: mode}])\nsander.mkdirSync(...paths, [{mode: mode}])\nsander.open(...paths, flags, [{mode: mode}])\nsander.openSync(...paths, flags, [{mode: mode}])\nsander.read(fd, buffer, offset, length, position)\nsander.readSync(fd, buffer, offset, length, position)\nsander.readdir(...paths)\nsander.readdirSync(...paths)\nsander.readFile(...paths, [options])\nsander.readFileSync(...paths, [options])\nsander.readlink(...paths)\nsander.readlinkSync(...paths)\nsander.realpath(...paths, [cache])\nsander.realpathSync(...paths, [cache])\nsander.rename(...paths).to(...paths)\nsander.renameSync(...paths).to(...paths)\nsander.rmdir(...paths)\nsander.rmdirSync(...paths)\nsander.stat(...paths)\nsander.statSync(...paths)\nsander.symlink(...paths).to(...paths, [{type: type}])\nsander.symlinkSync(...paths).to(...paths, [{type: type}])\nsander.truncate(...paths, len)\nsander.truncateSync(...paths, len)\nsander.unlink(...paths)\nsander.unlinkSync(...paths)\nsander.utimes(...paths, atime, mtime)\nsander.utimesSync(...paths, atime, mtime)\nsander.unwatchFile(...paths, [listener])\nsander.watch(...paths, [options], [listener])\nsander.watchFile(...paths, [options], listener)\nsander.write(fd, buffer, offset, length, position)\nsander.writeSync(fd, buffer, offset, length, position)\nsander.writeFile(...paths, data, [options])\nsander.writeFileSync(...paths, data, [options])\n```\n\nNote that with the `chmod`/`fchmod`/`lchmod`/`symlink`/`mkdir`/`open` methods (and their synchronous equivalents), the `mode` and `type` arguments must be passed as objects with a `mode` or `type` property. This is so that sander knows which arguments should be treated as parts of a path (because they're strings) and which shouldn't.\n\nThe same is true for methods like `readFile` - whereas in node you can do `fs.readFile('path/to/file.txt', 'utf-8')` if you want to specify utf-8 encoding, with sander the final argument should be a `{encoding: 'utf-8'}` object.\n\n\n### Extra methods\n\n```js\n// Copy a file using streams. `readOptions` is passed to `fs.createReadStream`,\n// while `writeOptions` is passed to `fs.createWriteStream`\nsander.copyFile(...paths, [readOptions]).to(...paths, [writeOptions])\n\n// Copy a file synchronously. `readOptions`, is passed to `fs.readFileSync`,\n// while `writeOptions` is passed to `fs.writeFileSync`\nsander.copyFileSync(...paths, [readOptions]).to(...paths, [writeOptions])\n\n// Copy a directory, recursively. `readOptions` and `writeOptions` are\n// treated as per `sander.copyFile[Sync]`\nsander.copydir(...paths, [readOptions]).to(...paths, [writeOptions])\nsander.copydirSync(...paths, [readOptions]).to(...paths, [writeOptions])\n\n// List contents of a directory, recursively\nsander.lsr(...paths)\nsander.lsrSync(...paths)\n\n// Remove a directory and its contents\nsander.rimraf(...paths)\nsander.rimrafSync(...paths)\n\n// Symlink a file or directory, unless we're on Windows in which\n// case fall back to copying to avoid permissions issues\nsander.symlinkOrCopy(...paths).to(...paths);\nsander.symlinkOrCopySync(...paths).to(...paths);\n```\n\n\n### License\n\nMIT\n\n","homepage":"https://github.com/rich-harris/sander#readme","trustScore":16,"sourceRank":{"basic_info_present":1,"repository_present":1,"readme_present":1,"license_present":1,"versions_present":1,"follows_semver":1,"recent_release":0,"not_brand_new":1,"one_point_oh":0,"dependent_projects":4,"dependent_repositories":3,"stars":2,"contributors":0,"subscribers":1,"all_prereleases":0,"any_outdated_dependencies":-1,"is_deprecated":0,"is_unmaintained":0,"is_removed":0,"trustScore":16},"versions":[{"versionNumber":"0.1.0","timestamp":"2014-09-13T21:58:04.256Z","trustScore":7,"dependencies":[{"packageName":"es6-promise","version":"^1.0.0"},{"packageName":"mkdirp","version":"^0.5.0"}]},{"versionNumber":"0.1.1","timestamp":"2014-09-14T02:14:42.351Z","trustScore":7,"dependencies":[{"packageName":"es6-promise","version":"^1.0.0"},{"packageName":"mkdirp","version":"^0.5.0"}]},{"versionNumber":"0.1.2","timestamp":"2014-09-26T19:28:47.736Z","trustScore":7,"dependencies":[{"packageName":"es6-promise","version":"^1.0.0"},{"packageName":"mkdirp","version":"^0.5.0"},{"packageName":"rimraf","version":"^2.2.8"}]},{"versionNumber":"0.1.3","timestamp":"2014-09-26T20:50:16.037Z","trustScore":7,"dependencies":[{"packageName":"es6-promise","version":"^1.0.0"},{"packageName":"mkdirp","version":"^0.5.0"},{"packageName":"rimraf","version":"^2.2.8"}]},{"versionNumber":"0.1.5","timestamp":"2014-09-28T01:26:57.522Z","trustScore":6,"dependencies":[{"packageName":"es6-promise","version":"^1.0.0"},{"packageName":"mkdirp","version":"^0.5.0"},{"packageName":"rimraf","version":"^2.2.8"}]},{"versionNumber":"0.1.6","timestamp":"2014-10-12T16:31:50.655Z","trustScore":8,"dependencies":[{"packageName":"es6-promise","version":"^1.0.0"},{"packageName":"mkdirp","version":"^0.5.0"},{"packageName":"rimraf","version":"^2.2.8"}]},{"versionNumber":"0.2.0","timestamp":"2014-10-23T19:54:24.021Z","trustScore":7,"dependencies":[{"packageName":"es6-promise","version":"^1.0.0"},{"packageName":"mkdirp","version":"^0.5.0"},{"packageName":"rimraf","version":"^2.2.8"},{"packageName":"graceful-fs","version":"^3.0.4"}]},{"versionNumber":"0.2.1","timestamp":"2014-11-10T17:13:01.370Z","trustScore":7,"dependencies":[{"packageName":"es6-promise","version":"^1.0.0"},{"packageName":"mkdirp","version":"^0.5.0"},{"packageName":"rimraf","version":"^2.2.8"},{"packageName":"graceful-fs","version":"^3.0.4"}]},{"versionNumber":"0.2.2","timestamp":"2015-01-11T18:03:27.849Z","trustScore":6,"dependencies":[{"packageName":"es6-promise","version":"^2.0.0"},{"packageName":"mkdirp","version":"^0.5.0"},{"packageName":"rimraf","version":"^2.2.8"},{"packageName":"graceful-fs","version":"^3.0.4"}]},{"versionNumber":"0.2.3","timestamp":"2015-04-18T15:16:52.907Z","trustScore":7,"dependencies":[{"packageName":"es6-promise","version":"^2.0.0"},{"packageName":"mkdirp","version":"^0.5.0"},{"packageName":"rimraf","version":"^2.2.8"},{"packageName":"graceful-fs","version":"^3.0.4"}]},{"versionNumber":"0.2.4","timestamp":"2015-04-28T01:53:11.849Z","trustScore":7,"dependencies":[{"packageName":"es6-promise","version":"^2.0.0"},{"packageName":"mkdirp","version":"^0.5.0"},{"packageName":"rimraf","version":"^2.2.8"},{"packageName":"graceful-fs","version":"^3.0.4"}]},{"versionNumber":"0.3.0","timestamp":"2015-05-04T22:27:04.620Z","trustScore":7,"dependencies":[{"packageName":"es6-promise","version":"^2.0.0"},{"packageName":"mkdirp","version":"^0.5.0"},{"packageName":"rimraf","version":"^2.2.8"},{"packageName":"graceful-fs","version":"^3.0.4"}]},{"versionNumber":"0.3.1","timestamp":"2015-05-05T17:45:57.513Z","trustScore":7,"dependencies":[{"packageName":"es6-promise","version":"^2.0.0"},{"packageName":"mkdirp","version":"^0.5.0"},{"packageName":"rimraf","version":"^2.2.8"},{"packageName":"graceful-fs","version":"^3.0.4"}]},{"versionNumber":"0.3.2","timestamp":"2015-05-06T15:54:19.700Z","trustScore":7,"dependencies":[{"packageName":"es6-promise","version":"^2.0.0"},{"packageName":"mkdirp","version":"^0.5.0"},{"packageName":"rimraf","version":"^2.2.8"},{"packageName":"graceful-fs","version":"^3.0.4"}]},{"versionNumber":"0.3.3","timestamp":"2015-05-06T22:24:59.307Z","trustScore":7,"dependencies":[{"packageName":"es6-promise","version":"^2.0.0"},{"packageName":"mkdirp","version":"^0.5.0"},{"packageName":"rimraf","version":"^2.2.8"},{"packageName":"graceful-fs","version":"^3.0.4"}]},{"versionNumber":"0.3.4","timestamp":"2015-05-21T15:35:54.026Z","trustScore":7,"dependencies":[{"packageName":"es6-promise","version":"^2.0.0"},{"packageName":"mkdirp","version":"^0.5.0"},{"packageName":"rimraf","version":"^2.2.8"},{"packageName":"graceful-fs","version":"^3.0.4"}]},{"versionNumber":"0.3.5","timestamp":"2015-08-18T22:50:11.087Z","trustScore":7,"dependencies":[{"packageName":"es6-promise","version":"^2.0.0"},{"packageName":"mkdirp","version":"^0.5.0"},{"packageName":"rimraf","version":"^2.2.8"},{"packageName":"graceful-fs","version":"^3.0.4"}]},{"versionNumber":"0.3.6","timestamp":"2015-09-24T21:20:04.869Z","trustScore":8,"dependencies":[{"packageName":"es6-promise","version":"^2.0.0"},{"packageName":"mkdirp","version":"^0.5.0"},{"packageName":"rimraf","version":"^2.2.8"},{"packageName":"graceful-fs","version":"^3.0.4"}]},{"versionNumber":"0.3.7","timestamp":"2015-09-25T16:39:22.532Z","trustScore":7,"dependencies":[{"packageName":"es6-promise","version":"^2.0.0"},{"packageName":"mkdirp","version":"^0.5.0"},{"packageName":"rimraf","version":"^2.2.8"},{"packageName":"graceful-fs","version":"^3.0.4"}]},{"versionNumber":"0.3.8","timestamp":"2015-10-01T18:24:11.015Z","trustScore":8,"dependencies":[{"packageName":"es6-promise","version":"^2.0.0"},{"packageName":"mkdirp","version":"^0.5.0"},{"packageName":"rimraf","version":"^2.2.8"},{"packageName":"graceful-fs","version":"^3.0.4"}]},{"versionNumber":"0.4.0","timestamp":"2015-10-23T03:14:09.354Z","trustScore":7,"dependencies":[{"packageName":"es6-promise","version":"^2.0.0"},{"packageName":"mkdirp","version":"^0.5.0"},{"packageName":"rimraf","version":"^2.2.8"},{"packageName":"graceful-fs","version":"^3.0.4"}]},{"versionNumber":"0.5.0","timestamp":"2016-04-17T06:05:28.517Z","trustScore":7,"dependencies":[{"packageName":"es6-promise","version":"^3.1.2"},{"packageName":"mkdirp","version":"^0.5.1"},{"packageName":"rimraf","version":"^2.5.2"},{"packageName":"graceful-fs","version":"^4.1.3"}]},{"versionNumber":"0.5.1","timestamp":"2016-05-07T16:48:01.781Z","trustScore":7,"dependencies":[{"packageName":"es6-promise","version":"^3.1.2"},{"packageName":"mkdirp","version":"^0.5.1"},{"packageName":"rimraf","version":"^2.5.2"},{"packageName":"graceful-fs","version":"^4.1.3"}]},{"versionNumber":"0.6.0","timestamp":"2016-11-27T03:44:38.223Z","trustScore":16,"dependencies":[{"packageName":"mkdirp","version":"^0.5.1"},{"packageName":"rimraf","version":"^2.5.2"},{"packageName":"graceful-fs","version":"^4.1.3"}]}]}},"__N_SSG":true}