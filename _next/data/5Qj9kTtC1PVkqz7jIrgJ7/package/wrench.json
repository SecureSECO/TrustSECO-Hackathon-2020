{"pageProps":{"postData":{"_id":"5fb66a179f9e7f16fd324b44","id":"wrench","crawlTimestamp":"19/11/2020 12:50:30","packageName":"wrench","description":"Recursive filesystem (and other) operations that Node *should* have.","repository":{"type":"git","url":"git+https://ryanmcgrath@github.com/ryanmcgrath/wrench-js.git"},"readme":"Warning: This Project Is Deprecated!\n----------------------------------------------------------------------------\n`wrench.js` is deprecated, and hasn't been updated in quite some time. **[I heavily recommend using fs-extra](https://github.com/jprichardson/node-fs-extra)** to do any extra filesystem operations.\n\nWrench was built for the _early_ days of Node, and it solved a problem that needed solving. I'm proud of what it's done; at the time of writing this, it was still downloaded over 25,000 times yesterday, and over 500,000 times in the last month. The fact that it wound up being embedded in so many projects is humbling and a great source of fun for me, but I just don't have the time to keep up with this at the moment. No alternate maintainers have appeared, and fs-extra is very well maintained anyway - one community solution is likely better.\n\nSo long, and thanks for all the fish. The original docs remain available here for anyone who may need them. If I could 301 a GitHub repository I'd do so.\n\nCheers,\n- Ryan McGrath\n\n\nwrench.js - Recursive file operations in Node.js\n----------------------------------------------------------------------------\nWhile I love Node.js, I've found myself missing some functions. Things like\nrecursively deleting/chmodding a directory (or even deep copying a directory),\nor even a basic line reader, shouldn't need to be re-invented time and time again.\n\nThat said, here's my attempt at a re-usable solution, at least until something\nmore formalized gets integrated into Node.js (*hint hint*). wrench.js is fairly simple\nto use - check out the documentation/examples below:\n\nPossibly Breaking Change in v1.5.0\n-----------------------------------------------------------------------------\nIn previous versions of Wrench, we went against the OS-default behavior of not\ndeleting a directory unless the operation is forced. In 1.5.0, this has been\nchanged to be the behavior people expect there to be - if you try to copy over\na directory that already exists, you'll get an Error returned or thrown stating\nthat you need to force it.\n\nSomething like this will do the trick:\n\n``` javascript\nwrench.copyDirSyncRecursive('directory_to_copy', 'location_where_copy_should_end_up', {\n    forceDelete: true\n});\n```\n\nIf you desire the older behavior of Wrench... hit up your package.json. If you\nhappen to find bugs in the 1.5.0 release please feel free to file them on the \nGitHub issues tracker for this project, or send me a pull request and I'll get to\nit as fast as I can. Thanks!\n\n**If this breaks enough projects I will consider rolling it back. Please hit me up if this seems to be the case.**\n\nInstallation\n-----------------------------------------------------------------------------\n\n    npm install wrench\n\nUsage\n-----------------------------------------------------------------------------\n``` javascript\nvar wrench = require('wrench'),\n\tutil = require('util');\n```\n\n### Synchronous operations\n``` javascript\n// Recursively create directories, sub-trees and all.\nwrench.mkdirSyncRecursive(dir, 0777);\n\n// Recursively delete the entire sub-tree of a directory, then kill the directory\nwrench.rmdirSyncRecursive('my_directory_name', failSilently);\n\n// Recursively read directories contents.\nwrench.readdirSyncRecursive('my_directory_name');\n\n// Recursively chmod the entire sub-tree of a directory\nwrench.chmodSyncRecursive('my_directory_name', 0755);\n\n// Recursively chown the entire sub-tree of a directory\nwrench.chownSyncRecursive(\"directory\", uid, gid);\n\n// Deep-copy an existing directory\nwrench.copyDirSyncRecursive('directory_to_copy', 'location_where_copy_should_end_up', {\n    forceDelete: bool, // Whether to overwrite existing directory or not\n    excludeHiddenUnix: bool, // Whether to copy hidden Unix files or not (preceding .)\n    preserveFiles: bool, // If we're overwriting something and the file already exists, keep the existing\n    preserveTimestamps: bool, // Preserve the mtime and atime when copying files\n    inflateSymlinks: bool, // Whether to follow symlinks or not when copying files\n    filter: regexpOrFunction, // A filter to match files against; if matches, do nothing (exclude).\n    whitelist: bool, // if true every file or directory which doesn't match filter will be ignored\n    include: regexpOrFunction, // An include filter (either a regexp or a function)\n    exclude: regexpOrFunction // An exclude filter (either a regexp or a function)\n});\n\n// Note: If a RegExp is provided then then it will be matched against the filename. If a function is\n//       provided then the signature should be the following:\n//       function(filename, dir) { return result; }\n\n// Read lines in from a file until you hit the end\nvar f = new wrench.LineReader('x.txt');\nwhile(f.hasNextLine()) {\n\tutil.puts(f.getNextLine());\n}\n\n// Note: You will need to close that above line reader at some point, otherwise\n// you will run into a \"too many open files\" error. f.close() or fs.closeSync(f.fd) are\n// your friends, as only you know when it is safe to close.\n```\n\n### Asynchronous operations\n``` javascript\n// Recursively read directories contents\nvar files = [];\nwrench.readdirRecursive('my_directory_name', function(error, curFiles) {\n    // curFiles is what you want\n});\n\n// If you're feeling somewhat masochistic\nwrench.copyDirRecursive(srcDir, newDir, {forceDelete: bool /* See sync version */}, callbackfn);\n```\n\nQuestions, comments? Hit me up. (ryan [at] venodesigns.net | http://twitter.com/ryanmcgrath)\n","homepage":"https://github.com/ryanmcgrath/wrench-js#readme","trustScore":23,"sourceRank":{"basic_info_present":1,"repository_present":1,"readme_present":1,"license_present":1,"versions_present":1,"follows_semver":1,"recent_release":0,"not_brand_new":1,"one_point_oh":1,"dependent_projects":6,"dependent_repositories":4,"stars":3,"contributors":1,"subscribers":1,"all_prereleases":0,"any_outdated_dependencies":0,"is_deprecated":0,"is_unmaintained":0,"is_removed":0,"trustScore":23},"versions":[{"versionNumber":"0.1.0","timestamp":"2011-04-13T04:36:13.126Z","trustScore":9,"dependencies":[]},{"versionNumber":"1.0.0","timestamp":"2011-04-13T04:36:13.126Z","trustScore":10,"dependencies":[]},{"versionNumber":"1.1.0","timestamp":"2011-04-29T02:19:09.485Z","trustScore":10,"dependencies":[]},{"versionNumber":"1.2.0","timestamp":"2011-09-19T04:14:32.369Z","trustScore":11,"dependencies":[]},{"versionNumber":"1.3.0","timestamp":"2011-10-10T16:58:37.712Z","trustScore":10,"dependencies":[]},{"versionNumber":"1.3.1","timestamp":"2011-10-23T07:55:11.731Z","trustScore":10,"dependencies":[]},{"versionNumber":"1.3.2","timestamp":"2011-11-04T02:54:00.848Z","trustScore":12,"dependencies":[]},{"versionNumber":"1.3.3","timestamp":"2012-01-13T14:53:37.336Z","trustScore":11,"dependencies":[]},{"versionNumber":"1.3.4","timestamp":"2012-01-16T21:48:16.041Z","trustScore":12,"dependencies":[]},{"versionNumber":"1.3.5","timestamp":"2012-01-17T09:49:12.002Z","trustScore":11,"dependencies":[]},{"versionNumber":"1.3.6","timestamp":"2012-02-18T09:57:32.403Z","trustScore":8,"dependencies":[]},{"versionNumber":"1.3.7","timestamp":"2012-02-23T10:26:21.917Z","trustScore":11,"dependencies":[]},{"versionNumber":"1.3.8","timestamp":"2012-03-30T22:16:08.337Z","trustScore":10,"dependencies":[]},{"versionNumber":"1.3.9","timestamp":"2012-05-16T15:38:17.391Z","trustScore":12,"dependencies":[]},{"versionNumber":"1.4.0","timestamp":"2012-11-09T10:19:57.082Z","trustScore":11,"dependencies":[]},{"versionNumber":"1.4.1","timestamp":"2012-11-09T15:08:05.503Z","trustScore":10,"dependencies":[]},{"versionNumber":"1.4.2","timestamp":"2012-11-11T01:35:59.656Z","trustScore":11,"dependencies":[]},{"versionNumber":"1.4.3","timestamp":"2012-11-16T09:42:05.512Z","trustScore":11,"dependencies":[]},{"versionNumber":"1.4.4","timestamp":"2012-12-01T06:38:59.699Z","trustScore":12,"dependencies":[]},{"versionNumber":"1.5.0","timestamp":"2013-05-03T21:04:57.960Z","trustScore":9,"dependencies":[]},{"versionNumber":"1.5.1","timestamp":"2013-05-03T21:52:50.618Z","trustScore":9,"dependencies":[]},{"versionNumber":"1.5.3","timestamp":"2013-10-15T22:24:50.542Z","trustScore":10,"dependencies":[]},{"versionNumber":"1.5.4","timestamp":"2013-10-15T22:48:29.448Z","trustScore":10,"dependencies":[]},{"versionNumber":"1.5.5","timestamp":"2014-01-17T07:52:21.352Z","trustScore":11,"dependencies":[]},{"versionNumber":"1.5.6","timestamp":"2014-01-18T03:12:17.214Z","trustScore":11,"dependencies":[]},{"versionNumber":"1.5.7","timestamp":"2014-02-10T06:21:05.930Z","trustScore":11,"dependencies":[]},{"versionNumber":"1.5.8","timestamp":"2014-03-01T22:36:17.947Z","trustScore":11,"dependencies":[]},{"versionNumber":"1.5.9","timestamp":"2016-03-30T16:43:01.307Z","trustScore":23,"dependencies":[]}]}},"__N_SSG":true}