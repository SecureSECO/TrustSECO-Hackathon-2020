{"pageProps":{"postData":{"_id":"5fb6684f9f9e7f16fd3249da","id":"vscode-textmate","crawlTimestamp":"19/11/2020 12:42:54","packageName":"vscode-textmate","description":"VSCode TextMate grammar helpers","repository":{"type":"git","url":"git+https://github.com/microsoft/vscode-textmate.git"},"readme":"# VSCode TextMate [![Build Status](https://dev.azure.com/ms/vscode-textmate/_apis/build/status/microsoft.vscode-textmate?branchName=master)](https://dev.azure.com/ms/vscode-textmate/_build/latest?definitionId=172&branchName=master)\r\n\r\nAn interpreter for grammar files as defined by TextMate. TextMate grammars use the oniguruma dialect (https://github.com/kkos/oniguruma). Supports loading grammar files from JSON or PLIST format. This library is used in VS Code. Cross - grammar injections are currently not supported.\r\n\r\n## Installing\r\n\r\n```sh\r\nnpm install vscode-textmate\r\n```\r\n\r\n## Using\r\n\r\n```javascript\r\nconst fs = require('fs');\r\nconst vsctm = require('./release/main');\r\nconst oniguruma = require('oniguruma');\r\n\r\n/**\r\n * Utility to read a file as a promise\r\n */\r\nfunction readFile(path) {\r\n    return new Promise((resolve, reject) => {\r\n        fs.readFile(path, (error, data) => error ? reject(error) : resolve(data));\r\n    })\r\n}\r\n\r\n// Create a registry that can create a grammar from a scope name.\r\nconst registry = new vsctm.Registry({\r\n    onigLib: Promise.resolve({\r\n        createOnigScanner: (sources) => new oniguruma.OnigScanner(sources),\r\n        createOnigString: (str) => new oniguruma.OnigString(str)\r\n    }),\r\n    loadGrammar: (scopeName) => {\r\n        if (scopeName === 'source.js') {\r\n            // https://github.com/textmate/javascript.tmbundle/blob/master/Syntaxes/JavaScript.plist\r\n            return readFile('./JavaScript.plist').then(data => vsctm.parseRawGrammar(data.toString()))\r\n        }\r\n        console.log(`Unknown scope name: ${scopeName}`);\r\n        return null;\r\n    }\r\n});\r\n\r\n// Load the JavaScript grammar and any other grammars included by it async.\r\nregistry.loadGrammar('source.js').then(grammar => {\r\n    const text = [\r\n        `function sayHello(name) {`,\r\n        `\\treturn \"Hello, \" + name;`,\r\n        `}`\r\n    ];\r\n    let ruleStack = vsctm.INITIAL;\r\n    for (let i = 0; i < text.length; i++) {\r\n        const line = text[i];\r\n        const lineTokens = grammar.tokenizeLine(line, ruleStack);\r\n        console.log(`\\nTokenizing line: ${line}`);\r\n        for (let j = 0; j < lineTokens.tokens.length; j++) {\r\n            const token = lineTokens.tokens[j];\r\n            console.log(` - token from ${token.startIndex} to ${token.endIndex} ` +\r\n              `(${line.substring(token.startIndex, token.endIndex)}) ` +\r\n              `with scopes ${token.scopes.join(', ')}`\r\n            );\r\n        }\r\n        ruleStack = lineTokens.ruleStack;\r\n    }\r\n});\r\n\r\n/* OUTPUT:\r\n\r\nUnknown scope name: source.js.regexp\r\n\r\nTokenizing line: function sayHello(name) {\r\n - token from 0 to 8 (function) with scopes source.js, meta.function.js, storage.type.function.js\r\n - token from 8 to 9 ( ) with scopes source.js, meta.function.js\r\n - token from 9 to 17 (sayHello) with scopes source.js, meta.function.js, entity.name.function.js\r\n - token from 17 to 18 (() with scopes source.js, meta.function.js, punctuation.definition.parameters.begin.js\r\n - token from 18 to 22 (name) with scopes source.js, meta.function.js, variable.parameter.function.js\r\n - token from 22 to 23 ()) with scopes source.js, meta.function.js, punctuation.definition.parameters.end.js\r\n - token from 23 to 24 ( ) with scopes source.js\r\n - token from 24 to 25 ({) with scopes source.js, punctuation.section.scope.begin.js\r\n\r\nTokenizing line:        return \"Hello, \" + name;\r\n - token from 0 to 1 (  ) with scopes source.js\r\n - token from 1 to 7 (return) with scopes source.js, keyword.control.js\r\n - token from 7 to 8 ( ) with scopes source.js\r\n - token from 8 to 9 (\") with scopes source.js, string.quoted.double.js, punctuation.definition.string.begin.js\r\n - token from 9 to 16 (Hello, ) with scopes source.js, string.quoted.double.js\r\n - token from 16 to 17 (\") with scopes source.js, string.quoted.double.js, punctuation.definition.string.end.js\r\n - token from 17 to 18 ( ) with scopes source.js\r\n - token from 18 to 19 (+) with scopes source.js, keyword.operator.arithmetic.js\r\n - token from 19 to 20 ( ) with scopes source.js\r\n - token from 20 to 24 (name) with scopes source.js, support.constant.dom.js\r\n - token from 24 to 25 (;) with scopes source.js, punctuation.terminator.statement.js\r\n\r\nTokenizing line: }\r\n - token from 0 to 1 (}) with scopes source.js, punctuation.section.scope.end.js\r\n\r\n*/\r\n\r\n```\r\n\r\n## For grammar authors\r\n\r\nSee [vscode-tmgrammar-test](https://github.com/PanAeon/vscode-tmgrammar-test) that can help you write unit tests against your grammar.\r\n\r\n## API doc\r\n\r\nSee [the main.ts file](./src/main.ts)\r\n\r\n## Developing\r\n\r\n* Clone the repository\r\n* Run `npm install`\r\n* Compile in the background with `npm run watch`\r\n* Run tests with `npm test`\r\n* Run benchmark with `npm run benchmark`\r\n* Troubleshoot a grammar with `npm run inspect -- PATH_TO_GRAMMAR PATH_TO_FILE`\r\n\r\n## Code of Conduct\r\n\r\nThis project has adopted the [Microsoft Open Source Code of Conduct](https://opensource.microsoft.com/codeofconduct/). For more information see the [Code of Conduct FAQ](https://opensource.microsoft.com/codeofconduct/faq/) or contact [opencode@microsoft.com](mailto:opencode@microsoft.com) with any additional questions or comments.\r\n\r\n\r\n## License\r\n[MIT](https://github.com/Microsoft/vscode-textmate/blob/master/LICENSE.md)\r\n\r\n","homepage":"https://github.com/microsoft/vscode-textmate#readme","trustScore":20,"sourceRank":{"basic_info_present":1,"repository_present":1,"readme_present":1,"license_present":1,"versions_present":1,"follows_semver":1,"recent_release":1,"not_brand_new":1,"one_point_oh":1,"dependent_projects":4,"dependent_repositories":3,"stars":2,"contributors":1,"subscribers":1,"all_prereleases":0,"any_outdated_dependencies":0,"is_deprecated":0,"is_unmaintained":0,"is_removed":0,"trustScore":20},"versions":[{"versionNumber":"0.0.1","timestamp":"2015-09-16T13:32:38.689Z","trustScore":9,"dependencies":[{"packageName":"oniguruma","version":"4.2.2"},{"packageName":"sax","version":"^1.1.1"}]},{"versionNumber":"0.0.2","timestamp":"2015-09-16T13:35:51.019Z","trustScore":9,"dependencies":[{"packageName":"oniguruma","version":"4.2.2"},{"packageName":"sax","version":"^1.1.1"}]},{"versionNumber":"0.0.3","timestamp":"2015-09-17T11:38:56.669Z","trustScore":10,"dependencies":[{"packageName":"oniguruma","version":"4.2.2"},{"packageName":"sax","version":"^1.1.1"}]},{"versionNumber":"0.0.4","timestamp":"2015-09-21T13:41:51.026Z","trustScore":9,"dependencies":[{"packageName":"oniguruma","version":"^4.2.4"},{"packageName":"sax","version":"^1.1.1"}]},{"versionNumber":"1.0.0","timestamp":"2015-10-21T09:26:03.755Z","trustScore":8,"dependencies":[{"packageName":"oniguruma","version":"^5.1.1"},{"packageName":"sax","version":"^1.1.1"}]},{"versionNumber":"1.0.1","timestamp":"2015-10-30T16:28:07.245Z","trustScore":8,"dependencies":[{"packageName":"oniguruma","version":"^5.1.1"},{"packageName":"sax","version":"^1.1.1"}]},{"versionNumber":"1.0.2","timestamp":"2015-10-31T12:08:00.567Z","trustScore":9,"dependencies":[{"packageName":"oniguruma","version":"^5.1.1"},{"packageName":"sax","version":"^1.1.1"}]},{"versionNumber":"1.0.3","timestamp":"2015-11-02T20:23:46.316Z","trustScore":7,"dependencies":[{"packageName":"oniguruma","version":"^5.1.1"},{"packageName":"sax","version":"^1.1.1"}]},{"versionNumber":"1.0.4","timestamp":"2015-11-04T13:53:29.338Z","trustScore":9,"dependencies":[{"packageName":"oniguruma","version":"^5.1.1"},{"packageName":"sax","version":"^1.1.1"}]},{"versionNumber":"1.0.5","timestamp":"2015-11-12T17:11:55.613Z","trustScore":9,"dependencies":[{"packageName":"oniguruma","version":"^5.1.1"},{"packageName":"sax","version":"^1.1.1"}]},{"versionNumber":"1.0.6","timestamp":"2015-11-13T17:11:14.904Z","trustScore":9,"dependencies":[{"packageName":"oniguruma","version":"^5.1.1"},{"packageName":"sax","version":"^1.1.1"}]},{"versionNumber":"1.0.7","timestamp":"2015-11-25T16:35:31.022Z","trustScore":9,"dependencies":[{"packageName":"oniguruma","version":"^5.1.1"},{"packageName":"sax","version":"^1.1.1"}]},{"versionNumber":"1.0.8","timestamp":"2015-11-30T15:24:33.560Z","trustScore":9,"dependencies":[{"packageName":"oniguruma","version":"^5.1.1"},{"packageName":"sax","version":"^1.1.1"}]},{"versionNumber":"1.0.9","timestamp":"2015-12-06T21:07:51.041Z","trustScore":9,"dependencies":[{"packageName":"alexandrudima-oniguruma","version":"^6.0.0"},{"packageName":"sax","version":"^1.1.1"}]},{"versionNumber":"1.0.10","timestamp":"2016-01-29T01:29:25.468Z","trustScore":8,"dependencies":[{"packageName":"alexandrudima-oniguruma","version":"^6.0.0"},{"packageName":"sax","version":"^1.1.1"}]},{"versionNumber":"1.0.11","timestamp":"2016-01-29T09:58:19.176Z","trustScore":8,"dependencies":[{"packageName":"oniguruma","version":"^6.0.1"},{"packageName":"sax","version":"^1.1.1"}]},{"versionNumber":"1.1.0","timestamp":"2016-05-23T13:25:40.187Z","trustScore":9,"dependencies":[{"packageName":"oniguruma","version":"^6.0.1"},{"packageName":"sax","version":"^1.1.1"}]},{"versionNumber":"1.2.0","timestamp":"2016-06-30T16:50:17.242Z","trustScore":9,"dependencies":[{"packageName":"oniguruma","version":"^6.0.1"},{"packageName":"sax","version":"^1.1.1"}]},{"versionNumber":"2.0.0","timestamp":"2016-06-30T23:26:55.972Z","trustScore":9,"dependencies":[{"packageName":"oniguruma","version":"^6.0.1"},{"packageName":"sax","version":"^1.1.1"}]},{"versionNumber":"2.0.1","timestamp":"2016-06-30T23:35:00.907Z","trustScore":9,"dependencies":[{"packageName":"oniguruma","version":"^6.0.1"},{"packageName":"sax","version":"^1.1.1"}]},{"versionNumber":"2.1.0","timestamp":"2016-08-17T09:42:56.556Z","trustScore":9,"dependencies":[{"packageName":"fast-plist","version":"^0.1.0"},{"packageName":"oniguruma","version":"^6.0.1"}]},{"versionNumber":"2.1.1","timestamp":"2016-08-17T15:04:58.315Z","trustScore":9,"dependencies":[{"packageName":"fast-plist","version":"^0.1.0"},{"packageName":"oniguruma","version":"^6.0.1"}]},{"versionNumber":"2.2.0","timestamp":"2016-09-21T07:31:41.940Z","trustScore":10,"dependencies":[{"packageName":"fast-plist","version":"^0.1.2"},{"packageName":"oniguruma","version":"^6.0.1"}]},{"versionNumber":"2.3.0","timestamp":"2016-10-22T13:08:33.981Z","trustScore":9,"dependencies":[{"packageName":"fast-plist","version":"^0.1.2"},{"packageName":"oniguruma","version":"^6.0.1"}]},{"versionNumber":"2.3.1","timestamp":"2016-11-08T17:11:45.507Z","trustScore":10,"dependencies":[{"packageName":"fast-plist","version":"^0.1.2"},{"packageName":"oniguruma","version":"^6.0.1"}]},{"versionNumber":"2.3.2","timestamp":"2016-12-08T16:19:13.448Z","trustScore":10,"dependencies":[{"packageName":"fast-plist","version":"^0.1.2"},{"packageName":"oniguruma","version":"^6.0.1"}]},{"versionNumber":"3.0.0","timestamp":"2017-01-03T09:42:05.035Z","trustScore":9,"dependencies":[{"packageName":"fast-plist","version":"^0.1.2"},{"packageName":"oniguruma","version":"^6.0.1"}]},{"versionNumber":"3.0.1","timestamp":"2017-01-04T13:37:08.424Z","trustScore":8,"dependencies":[{"packageName":"fast-plist","version":"^0.1.2"},{"packageName":"oniguruma","version":"^6.0.1"}]},{"versionNumber":"3.1.0","timestamp":"2017-01-05T10:16:07.537Z","trustScore":9,"dependencies":[{"packageName":"fast-plist","version":"^0.1.2"},{"packageName":"oniguruma","version":"^6.0.1"}]},{"versionNumber":"3.1.1","timestamp":"2017-02-28T15:16:04.984Z","trustScore":9,"dependencies":[{"packageName":"fast-plist","version":"^0.1.2"},{"packageName":"oniguruma","version":"^6.0.1"}]},{"versionNumber":"3.1.2","timestamp":"2017-03-29T11:36:24.776Z","trustScore":9,"dependencies":[{"packageName":"fast-plist","version":"^0.1.2"},{"packageName":"oniguruma","version":"^6.0.1"}]},{"versionNumber":"3.1.3","timestamp":"2017-03-29T13:43:23.046Z","trustScore":8,"dependencies":[{"packageName":"fast-plist","version":"^0.1.2"},{"packageName":"oniguruma","version":"^6.0.1"}]},{"versionNumber":"3.1.4","timestamp":"2017-04-13T11:19:41.978Z","trustScore":9,"dependencies":[{"packageName":"fast-plist","version":"^0.1.2"},{"packageName":"oniguruma","version":"^6.0.1"}]},{"versionNumber":"3.1.5","timestamp":"2017-05-29T12:19:11.518Z","trustScore":9,"dependencies":[{"packageName":"fast-plist","version":"^0.1.2"},{"packageName":"oniguruma","version":"^6.0.1"}]},{"versionNumber":"3.2.0","timestamp":"2017-10-30T19:43:55.233Z","trustScore":9,"dependencies":[{"packageName":"fast-plist","version":"^0.1.2"},{"packageName":"oniguruma","version":"^6.0.1"}]},{"versionNumber":"3.3.0","timestamp":"2018-03-16T13:40:55.452Z","trustScore":9,"dependencies":[{"packageName":"fast-plist","version":"^0.1.2"},{"packageName":"oniguruma","version":"^6.0.1"}]},{"versionNumber":"3.3.1","timestamp":"2018-03-16T21:54:50.422Z","trustScore":8,"dependencies":[{"packageName":"fast-plist","version":"^0.1.2"},{"packageName":"oniguruma","version":"^6.0.1"}]},{"versionNumber":"3.3.2","timestamp":"2018-03-19T21:52:21.581Z","trustScore":9,"dependencies":[{"packageName":"fast-plist","version":"^0.1.2"},{"packageName":"oniguruma","version":"^6.0.1"}]},{"versionNumber":"3.3.3","timestamp":"2018-04-03T01:40:43.615Z","trustScore":8,"dependencies":[{"packageName":"fast-plist","version":"^0.1.2"},{"packageName":"oniguruma","version":"^6.0.1"}]},{"versionNumber":"4.0.0-next.1","timestamp":"2018-06-18T10:47:56.695Z","trustScore":10,"dependencies":[{"packageName":"fast-plist","version":"^0.1.2"},{"packageName":"oniguruma","version":"^6.0.1"}]},{"versionNumber":"4.0.0-next.2","timestamp":"2018-06-18T14:07:50.275Z","trustScore":9,"dependencies":[{"packageName":"fast-plist","version":"^0.1.2"},{"packageName":"oniguruma","version":"^7.0.0"}]},{"versionNumber":"4.0.0-next.3","timestamp":"2018-06-19T14:19:39.739Z","trustScore":8,"dependencies":[{"packageName":"oniguruma","version":"^7.0.0"}]},{"versionNumber":"4.0.0","timestamp":"2018-06-21T15:15:59.401Z","trustScore":10,"dependencies":[{"packageName":"oniguruma","version":"^7.0.0"}]},{"versionNumber":"4.0.1","timestamp":"2018-06-22T15:21:03.926Z","trustScore":10,"dependencies":[{"packageName":"oniguruma","version":"^7.0.0"}]},{"versionNumber":"4.1.0","timestamp":"2019-03-21T21:04:07.037Z","trustScore":10,"dependencies":[{"packageName":"oniguruma","version":"^7.0.0"}]},{"versionNumber":"4.1.1","timestamp":"2019-05-02T13:42:29.414Z","trustScore":9,"dependencies":[{"packageName":"oniguruma","version":"^7.0.0"}]},{"versionNumber":"4.2.0","timestamp":"2019-07-12T09:19:44.661Z","trustScore":10,"dependencies":[{"packageName":"oniguruma","version":"^7.2.0"}]},{"versionNumber":"4.2.1","timestamp":"2019-07-12T14:06:34.924Z","trustScore":10,"dependencies":[{"packageName":"oniguruma","version":"^7.2.0"}]},{"versionNumber":"4.2.2","timestamp":"2019-07-12T14:23:10.718Z","trustScore":8,"dependencies":[{"packageName":"oniguruma","version":"^7.2.0"}]},{"versionNumber":"4.3.0","timestamp":"2019-10-28T14:46:09.409Z","trustScore":10,"dependencies":[{"packageName":"oniguruma","version":"^7.2.0"}]},{"versionNumber":"4.4.0","timestamp":"2019-11-20T16:03:07.150Z","trustScore":11,"dependencies":[{"packageName":"oniguruma","version":"^7.2.0"}]},{"versionNumber":"5.0.0","timestamp":"2020-04-22T22:04:14.923Z","trustScore":17,"dependencies":[]},{"versionNumber":"5.0.1","timestamp":"2020-04-23T08:33:41.537Z","trustScore":19,"dependencies":[]},{"versionNumber":"5.0.2","timestamp":"2020-04-23T08:39:52.058Z","trustScore":19,"dependencies":[]},{"versionNumber":"5.1.0","timestamp":"2020-04-27T22:50:56.343Z","trustScore":18,"dependencies":[]},{"versionNumber":"5.1.1","timestamp":"2020-04-27T23:06:08.679Z","trustScore":19,"dependencies":[]},{"versionNumber":"5.1.2","timestamp":"2020-06-24T19:34:06.695Z","trustScore":18,"dependencies":[]},{"versionNumber":"5.2.0","timestamp":"2020-06-29T12:48:01.585Z","trustScore":20,"dependencies":[]}]}},"__N_SSG":true}