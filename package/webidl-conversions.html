<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><title>TrustSECO</title><link rel="icon" href="/favicon.ico"/><link rel="preload" href="/TrustSECO/_next/static/css/dd46eff8b0fa29b7c6a1.css" as="style"/><link rel="stylesheet" href="/TrustSECO/_next/static/css/dd46eff8b0fa29b7c6a1.css" data-n-g=""/><link rel="preload" href="/TrustSECO/_next/static/css/9e26edf5045646c35bf5.css" as="style"/><link rel="stylesheet" href="/TrustSECO/_next/static/css/9e26edf5045646c35bf5.css" data-n-p=""/><noscript data-n-css="true"></noscript><link rel="preload" href="/TrustSECO/_next/static/chunks/main-06c1dcca274dd3ebd367.js" as="script"/><link rel="preload" href="/TrustSECO/_next/static/chunks/webpack-e067438c4cf4ef2ef178.js" as="script"/><link rel="preload" href="/TrustSECO/_next/static/chunks/framework.490e6e89fb7343c23de5.js" as="script"/><link rel="preload" href="/TrustSECO/_next/static/chunks/commons.e12371422b04e39d225f.js" as="script"/><link rel="preload" href="/TrustSECO/_next/static/chunks/pages/_app-6332075865a73fbac0f6.js" as="script"/><link rel="preload" href="/TrustSECO/_next/static/chunks/20d867a918a78c19a392d2ab3562d7e5efc3a8e7.a2788434e14b577a5942.js" as="script"/><link rel="preload" href="/TrustSECO/_next/static/chunks/pages/package/%5Bid%5D-7bbdc45fafc792b9b77c.js" as="script"/></head><body><div id="__next"><div class="Home_wrapper__3EDsh"><div class="Home_container__1EcsU"><div class="container"><div class="Home_content__2fqOz row"><a href="/TrustSECO"><h2>TrustSECO</h2></a><div offset="2" class="Home_contentInside__3OhO7 col-md-10 offset-md-1"><main class="Home_main__1x8gC"><div class="row"><div class="col-md-8"><div class="card"><div class="card-header">webidl-conversions</div><div class="card-body"><div class="card-subtitle h6">Implements the WebIDL algorithms for converting to and from JavaScript values</div><p class="card-text">Repository:<!-- --> <a href="git+https://github.com/jsdom/webidl-conversions.git">git+https://github.com/jsdom/webidl-conversions.git</a></p></div></div><div class="card"><div class="card-header">Package versions</div><div class="card-body"><p class="card-text"><div><p>Version: <!-- -->1.0.0<br/><span> <!-- -->  </span> trustscore:<!-- --> <!-- -->10</p></div><div><p>Version: <!-- -->1.0.1<br/><span> <!-- -->  </span> trustscore:<!-- --> <!-- -->10</p></div><div><p>Version: <!-- -->1.1.0<br/><span> <!-- -->  </span> trustscore:<!-- --> <!-- -->10</p></div><div><p>Version: <!-- -->1.2.0<br/><span> <!-- -->  </span> trustscore:<!-- --> <!-- -->9</p></div><div><p>Version: <!-- -->1.2.1<br/><span> <!-- -->  </span> trustscore:<!-- --> <!-- -->8</p></div><div><p>Version: <!-- -->2.0.0<br/><span> <!-- -->  </span> trustscore:<!-- --> <!-- -->9</p></div><div><p>Version: <!-- -->2.0.1<br/><span> <!-- -->  </span> trustscore:<!-- --> <!-- -->10</p></div><div><p>Version: <!-- -->3.0.0<br/><span> <!-- -->  </span> trustscore:<!-- --> <!-- -->9</p></div><div><p>Version: <!-- -->3.0.1<br/><span> <!-- -->  </span> trustscore:<!-- --> <!-- -->9</p></div><div><p>Version: <!-- -->4.0.0<br/><span> <!-- -->  </span> trustscore:<!-- --> <!-- -->9</p></div><div><p>Version: <!-- -->4.0.1<br/><span> <!-- -->  </span> trustscore:<!-- --> <!-- -->10</p></div><div><p>Version: <!-- -->4.0.2<br/><span> <!-- -->  </span> trustscore:<!-- --> <!-- -->10</p></div><div><p>Version: <!-- -->5.0.0<br/><span> <!-- -->  </span> trustscore:<!-- --> <!-- -->12</p></div><div><p>Version: <!-- -->6.0.0<br/><span> <!-- -->  </span> trustscore:<!-- --> <!-- -->17</p></div><div><p>Version: <!-- -->6.1.0<br/><span> <!-- -->  </span> trustscore:<!-- --> <!-- -->21</p></div></p></div></div></div><div class="col-md-4"><div class="card"><div class="card-body"><a href="https://secureseco.github.io/Votingsystem#/">Vote score</a></div> </div><div class="card"><div class="card-header">TrustScore <strong>21</strong></div><div class="card-body"><p class="card-text"><strong>Sourcerank:</strong><div>basic_info_present:<!-- --> <!-- -->1</div><div>repository_present:<!-- --> <!-- -->1</div><div>readme_present:<!-- --> <!-- -->1</div><div>license_present:<!-- --> <!-- -->1</div><div>versions_present:<!-- --> <!-- -->1</div><div>follows_semver:<!-- --> <!-- -->1</div><div>recent_release:<!-- --> <!-- -->0</div><div>not_brand_new:<!-- --> <!-- -->1</div><div>one_point_oh:<!-- --> <!-- -->1</div><div>dependent_projects:<!-- --> <!-- -->4</div><div>dependent_repositories:<!-- --> <!-- -->5</div><div>stars: <!-- -->1</div><div>contributors:<!-- --> <!-- -->1</div><div>subscribers:<!-- --> <!-- -->2</div><div>all_prereleases:<!-- --> <!-- -->0</div><div>any_outdated_dependencies:<!-- --> <!-- -->0</div><div>is_deprecated:<!-- --> <!-- -->0</div><div>is_unmaintained:<!-- --> <!-- -->0</div><div>is_removed: <!-- -->0</div></p></div></div></div></div><div class="row"><div class="col-md-12"></div></div></main></div></div></div></div><footer class="footer_footer__1tNtI"><div class="footer_footer-content__2FMz9"><div class="col-md-3"><div class="footer_footer-slogan__ppYfy"><h4>TrustSECO 2020</h4><p>A project by <a href="https://secureseco.org">SecureSECO</a></p></div></div><div class="col-md-3"><h4>Links</h4><ul><li><a href="https://github.com/SecureSECO/TrustSECO">Github</a></li><li><a href="https://twitter.com/SecoTrust">Twitter</a></li><li><a href="https://www.linkedin.com/company/trustseco">LinkeIn</a></li></ul></div><div class="col-md-3"></div></div></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"postData":{"_id":"5fb668a69f9e7f16fd324a1c","id":"webidl-conversions","crawlTimestamp":"19/11/2020 12:44:21","packageName":"webidl-conversions","description":"Implements the WebIDL algorithms for converting to and from JavaScript values","repository":{"type":"git","url":"git+https://github.com/jsdom/webidl-conversions.git"},"readme":"# Web IDL Type Conversions on JavaScript Values\n\nThis package implements, in JavaScript, the algorithms to convert a given JavaScript value according to a given [Web IDL](http://heycam.github.io/webidl/) [type](http://heycam.github.io/webidl/#idl-types).\n\nThe goal is that you should be able to write code like\n\n```js\n\"use strict\";\nconst conversions = require(\"webidl-conversions\");\n\nfunction doStuff(x, y) {\n    x = conversions[\"boolean\"](x);\n    y = conversions[\"unsigned long\"](y);\n    // actual algorithm code here\n}\n```\n\nand your function `doStuff` will behave the same as a Web IDL operation declared as\n\n```webidl\nvoid doStuff(boolean x, unsigned long y);\n```\n\n## API\n\nThis package's main module's default export is an object with a variety of methods, each corresponding to a different Web IDL type. Each method, when invoked on a JavaScript value, will give back the new JavaScript value that results after passing through the Web IDL conversion rules. (See below for more details on what that means.) Alternately, the method could throw an error, if the Web IDL algorithm is specified to do so: for example `conversions[\"float\"](NaN)` [will throw a `TypeError`](http://heycam.github.io/webidl/#es-float).\n\nEach method also accepts a second, optional, parameter for miscellaneous options. For conversion methods that throw errors, a string option `{ context }` may be provided to provide more information in the error message. (For example, `conversions[\"float\"](NaN, { context: \"Argument 1 of Interface's operation\" })` will throw an error with message `\"Argument 1 of Interface's operation is not a finite floating-point value.\"`)\n\nIf we are dealing with multiple JavaScript realms (such as those created using Node.js' [vm](https://nodejs.org/api/vm.html) module or the HTML `iframe` element), and exceptions from another realm need to be thrown, one can supply an object option `globals` containing the following properties:\n\n```js\n{\n  globals: {\n    Number,\n    String,\n    TypeError\n  }\n}\n```\n\nThose specific functions will be used when throwing exceptions.\n\nSpecific conversions may also accept other options, the details of which can be found below.\n\n## Conversions implemented\n\nConversions for all of the basic types from the Web IDL specification are implemented:\n\n- [`any`](https://heycam.github.io/webidl/#es-any)\n- [`void`](https://heycam.github.io/webidl/#es-void)\n- [`boolean`](https://heycam.github.io/webidl/#es-boolean)\n- [Integer types](https://heycam.github.io/webidl/#es-integer-types), which can additionally be provided the boolean options `{ clamp, enforceRange }` as a second parameter\n- [`float`](https://heycam.github.io/webidl/#es-float), [`unrestricted float`](https://heycam.github.io/webidl/#es-unrestricted-float)\n- [`double`](https://heycam.github.io/webidl/#es-double), [`unrestricted double`](https://heycam.github.io/webidl/#es-unrestricted-double)\n- [`DOMString`](https://heycam.github.io/webidl/#es-DOMString), which can additionally be provided the boolean option `{ treatNullAsEmptyString }` as a second parameter\n- [`ByteString`](https://heycam.github.io/webidl/#es-ByteString), [`USVString`](https://heycam.github.io/webidl/#es-USVString)\n- [`object`](https://heycam.github.io/webidl/#es-object)\n- [Buffer source types](https://heycam.github.io/webidl/#es-buffer-source-types), which can additionally be provided with the boolean option `{ allowShared }` as a second parameter\n\nAdditionally, for convenience, the following derived type definitions are implemented:\n\n- [`ArrayBufferView`](https://heycam.github.io/webidl/#ArrayBufferView), which can additionally be provided with the boolean option `{ allowShared }` as a second parameter\n- [`BufferSource`](https://heycam.github.io/webidl/#BufferSource)\n- [`DOMTimeStamp`](https://heycam.github.io/webidl/#DOMTimeStamp)\n- [`Function`](https://heycam.github.io/webidl/#Function)\n- [`VoidFunction`](https://heycam.github.io/webidl/#VoidFunction) (although it will not censor the return type)\n\nDerived types, such as nullable types, promise types, sequences, records, etc. are not handled by this library. You may wish to investigate the [webidl2js](https://github.com/jsdom/webidl2js) project.\n\n### A note on the `long long` types\n\nThe `long long` and `unsigned long long` Web IDL types can hold values that cannot be stored in JavaScript numbers. Conversions are still accurate as we make use of BigInt in the conversion process, but in the case of `unsigned long long` we simply cannot represent some possible output values in JavaScript. For example, converting the JavaScript number `-1` to a Web IDL `unsigned long long` is supposed to produce the Web IDL value `18446744073709551615`. Since we are representing our Web IDL values in JavaScript, we can't represent `18446744073709551615`, so we instead the best we could do is `18446744073709551616` as the output.\n\nTo mitigate this, we could return the raw BigInt value from the conversion function, but right now it is not implemented. If your use case requires such precision, [file an issue](https://github.com/jsdom/webidl-conversions/issues/new).\n\nOn the other hand, `long long` conversion is always accurate, since the input value can never be more precise than the output value.\n\n### A note on `BufferSource` types\n\nAll of the `BufferSource` types will throw when the relevant `ArrayBuffer` has been detached. This technically is not part of the [specified conversion algorithm](https://heycam.github.io/webidl/#es-buffer-source-types), but instead part of the [getting a reference/getting a copy](https://heycam.github.io/webidl/#ref-for-dfn-get-buffer-source-reference%E2%91%A0) algorithms. We've consolidated them here for convenience and ease of implementation, but if there is a need to separate them in the future, please open an issue so we can investigate.\n\n## Background\n\nWhat's actually going on here, conceptually, is pretty weird. Let's try to explain.\n\nWeb IDL, as part of its madness-inducing design, has its own type system. When people write algorithms in web platform specs, they usually operate on Web IDL values, i.e. instances of Web IDL types. For example, if they were specifying the algorithm for our `doStuff` operation above, they would treat `x` as a Web IDL value of [Web IDL type `boolean`](http://heycam.github.io/webidl/#idl-boolean). Crucially, they would _not_ treat `x` as a JavaScript variable whose value is either the JavaScript `true` or `false`. They're instead working in a different type system altogether, with its own rules.\n\nSeparately from its type system, Web IDL defines a [\"binding\"](http://heycam.github.io/webidl/#ecmascript-binding) of the type system into JavaScript. This contains rules like: when you pass a JavaScript value to the JavaScript method that manifests a given Web IDL operation, how does that get converted into a Web IDL value? For example, a JavaScript `true` passed in the position of a Web IDL `boolean` argument becomes a Web IDL `true`. But, a JavaScript `true` passed in the position of a [Web IDL `unsigned long`](http://heycam.github.io/webidl/#idl-unsigned-long) becomes a Web IDL `1`. And so on.\n\nFinally, we have the actual implementation code. This is usually C++, although these days [some smart people are using Rust](https://github.com/servo/servo). The implementation, of course, has its own type system. So when they implement the Web IDL algorithms, they don't actually use Web IDL values, since those aren't \"real\" outside of specs. Instead, implementations apply the Web IDL binding rules in such a way as to convert incoming JavaScript values into C++ values. For example, if code in the browser called `doStuff(true, true)`, then the implementation code would eventually receive a C++ `bool` containing `true` and a C++ `uint32_t` containing `1`.\n\nThe upside of all this is that implementations can abstract all the conversion logic away, letting Web IDL handle it, and focus on implementing the relevant methods in C++ with values of the correct type already provided. That is payoff of Web IDL, in a nutshell.\n\nAnd getting to that payoff is the goal of _this_ project—but for JavaScript implementations, instead of C++ ones. That is, this library is designed to make it easier for JavaScript developers to write functions that behave like a given Web IDL operation. So conceptually, the conversion pipeline, which in its general form is JavaScript values ↦ Web IDL values ↦ implementation-language values, in this case becomes JavaScript values ↦ Web IDL values ↦ JavaScript values. And that intermediate step is where all the logic is performed: a JavaScript `true` becomes a Web IDL `1` in an unsigned long context, which then becomes a JavaScript `1`.\n\n## Don't use this\n\nSeriously, why would you ever use this? You really shouldn't. Web IDL is … strange, and you shouldn't be emulating its semantics. If you're looking for a generic argument-processing library, you should find one with better rules than those from Web IDL. In general, your JavaScript should not be trying to become more like Web IDL; if anything, we should fix Web IDL to make it more like JavaScript.\n\nThe _only_ people who should use this are those trying to create faithful implementations (or polyfills) of web platform interfaces defined in Web IDL. Its main consumer is the [jsdom](https://github.com/jsdom/jsdom) project.\n","homepage":"https://github.com/jsdom/webidl-conversions#readme","trustScore":21,"sourceRank":{"basic_info_present":1,"repository_present":1,"readme_present":1,"license_present":1,"versions_present":1,"follows_semver":1,"recent_release":0,"not_brand_new":1,"one_point_oh":1,"dependent_projects":4,"dependent_repositories":5,"stars":1,"contributors":1,"subscribers":2,"all_prereleases":0,"any_outdated_dependencies":0,"is_deprecated":0,"is_unmaintained":0,"is_removed":0,"trustScore":21},"versions":[{"versionNumber":"1.0.0","timestamp":"2014-08-15T20:52:19.528Z","trustScore":10,"dependencies":[]},{"versionNumber":"1.0.1","timestamp":"2014-08-21T21:21:18.456Z","trustScore":10,"dependencies":[]},{"versionNumber":"1.1.0","timestamp":"2014-10-13T22:12:31.432Z","trustScore":10,"dependencies":[]},{"versionNumber":"1.2.0","timestamp":"2014-10-14T20:29:18.113Z","trustScore":9,"dependencies":[]},{"versionNumber":"1.2.1","timestamp":"2014-12-16T22:35:25.554Z","trustScore":8,"dependencies":[]},{"versionNumber":"2.0.0","timestamp":"2015-09-19T21:32:35.845Z","trustScore":9,"dependencies":[]},{"versionNumber":"2.0.1","timestamp":"2015-11-09T02:11:51.581Z","trustScore":10,"dependencies":[]},{"versionNumber":"3.0.0","timestamp":"2015-11-09T02:12:10.465Z","trustScore":9,"dependencies":[]},{"versionNumber":"3.0.1","timestamp":"2016-01-04T06:08:05.108Z","trustScore":9,"dependencies":[]},{"versionNumber":"4.0.0","timestamp":"2017-02-11T22:45:05.564Z","trustScore":9,"dependencies":[]},{"versionNumber":"4.0.1","timestamp":"2017-02-20T21:19:40.959Z","trustScore":10,"dependencies":[]},{"versionNumber":"4.0.2","timestamp":"2017-08-14T03:31:26.237Z","trustScore":10,"dependencies":[]},{"versionNumber":"5.0.0","timestamp":"2019-12-07T20:23:01.802Z","trustScore":12,"dependencies":[]},{"versionNumber":"6.0.0","timestamp":"2020-03-23T20:02:59.337Z","trustScore":17,"dependencies":[]},{"versionNumber":"6.1.0","timestamp":"2020-04-17T15:56:22.269Z","trustScore":21,"dependencies":[]}]}},"__N_SSG":true},"page":"/package/[id]","query":{"id":"webidl-conversions"},"buildId":"RDsqbXlwf8gR0mIl6-rpc","assetPrefix":"/TrustSECO","nextExport":false,"isFallback":false,"gsp":true,"head":[["meta",{"name":"viewport","content":"width=device-width"}],["meta",{"charSet":"utf-8"}],["title",{"children":"TrustSECO"}],["link",{"rel":"icon","href":"/favicon.ico"}]]}</script><script nomodule="" src="/TrustSECO/_next/static/chunks/polyfills-11c8eba6a84e3fddec04.js"></script><script src="/TrustSECO/_next/static/chunks/main-06c1dcca274dd3ebd367.js" async=""></script><script src="/TrustSECO/_next/static/chunks/webpack-e067438c4cf4ef2ef178.js" async=""></script><script src="/TrustSECO/_next/static/chunks/framework.490e6e89fb7343c23de5.js" async=""></script><script src="/TrustSECO/_next/static/chunks/commons.e12371422b04e39d225f.js" async=""></script><script src="/TrustSECO/_next/static/chunks/pages/_app-6332075865a73fbac0f6.js" async=""></script><script src="/TrustSECO/_next/static/chunks/20d867a918a78c19a392d2ab3562d7e5efc3a8e7.a2788434e14b577a5942.js" async=""></script><script src="/TrustSECO/_next/static/chunks/pages/package/%5Bid%5D-7bbdc45fafc792b9b77c.js" async=""></script><script src="/TrustSECO/_next/static/RDsqbXlwf8gR0mIl6-rpc/_buildManifest.js" async=""></script><script src="/TrustSECO/_next/static/RDsqbXlwf8gR0mIl6-rpc/_ssgManifest.js" async=""></script></body></html>